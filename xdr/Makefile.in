#### Start of system configuration section. ####

SRCDIR = @srcdir@
VPATH = @srcdir@
RPCGEN = @RPCGEN@ @RPCGEN_C@
DEFS = @DEFS@
TRANSPORTFLAGS = @RPCGEN_I@ -s udp -s tcp
EXEEXT = @EXEEXT@
SHELL = /bin/bash

#### End of system configuration section. ####

# include site-specific defintions generated by BUILD.

MOUNT_SRC	= mount.h mount_xdr.c mount_svc.c
NFS_SRC		= nfs_prot.h nfs_prot_xdr.c
UGID_SRC	= ugid.h ugid_xdr.c ugid_clnt.c
RPC_SRC		= $(MOUNT_SRC) $(NFS_SRC) $(UGID_SRC)

.PHONY: all install

all: $(RPC_SRC)

install:

mount.h: mount.x
	@rm -f $@
	$(RPCGEN) -h -o $@ $?

mount_xdr.c: mount.x
	@rm -f $@
	$(RPCGEN) -c $? | sed 's;^#include ".*/mount.h"$$;#include "mount.h";' > $@

mount_svc.c: mount.x
	@rm -f $@
	$(RPCGEN) -m $? | sed 's;^#include ".*/mount.h"$$;#include "mount.h";' > $@

nfs_prot.h: nfs_prot.x
	@rm -f $@
	$(RPCGEN) -h -o $@ $?

nfs_prot_xdr.c: nfs_prot.x
	@rm -f $@
	$(RPCGEN) -c $? | sed 's;^#include ".*/nfs_prot.h"$$;#include "nfs_prot.h";' >$@

ugid.h: ugid.x
	@rm -f $@
	$(RPCGEN) -h -o $@ $?

ugid_xdr.c: ugid.x
	@rm -f $@
	$(RPCGEN) -c $? | sed 's;^#include ".*/ugid.h"$$;#include "ugid.h";' > $@

ugid_clnt.c: ugid.x
	@rm -f $@
	$(RPCGEN) -l -o $@ $?

.PHONY: clean mostlyclean distclean

clean mostlyclean distclean::
	@rm -vf *.h
	@rm -vf *.c
	@rm -vf *.o
	@rm -vf *.stackdump
	@rm -vf core

mostlyclean distclean::
	@rm -vf Makefile

distclean::
	@rm -vf *~

# Prevent GNU make v3 from overflowing arg limit on SysV.
.NOEXPORT:
